
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Phases Block &#8212; pscfinverse 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="phases-block">
<span id="param-phases"></span><h1>Phases Block<a class="headerlink" href="#phases-block" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">Phases{}</span></code> block defines all phases considered in the search,
whether they are a target or competitor, and which SCFT solver
is to be used. The energies of each of these phases is used to
calculate the Fitness at each point in search space, <span class="math notranslate nohighlight">\({\Omega}\)</span>,
using</p>
<p>for set <span class="math notranslate nohighlight">\(T\)</span> of target phases and set <span class="math notranslate nohighlight">\(C\)</span> of competitors,
and where <span class="math notranslate nohighlight">\(F_{i}\)</span> is the free energy of phase <span class="math notranslate nohighlight">\(i\)</span>.</p>
<p>In order to determine the relative stability of a target phase,
and thus obtain the fitness at a point in the search space,
PscfInverse needs a pre-determined list of competing morphologies
to consider at each point in the search space.
This set of morphologies is defined in the <code class="docutils literal notranslate"><span class="pre">Phases{</span> <span class="pre">...</span> <span class="pre">}</span></code>
block of the parameter file. An example of such a block that could
be used in a simple search of conformationally symmetric diblock
copolymers seeking BCC spheres (bcc) against competing hexagonally packed
cylinders (hex), double gyroid (gyr), and lamellae (lam).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Phases</span><span class="p">{</span>
    <span class="n">scft_solver</span> <span class="n">pscf</span>
    <span class="n">input_root</span>  <span class="n">inputs</span><span class="o">/</span>
    <span class="n">TargetPhase</span><span class="p">{</span>
        <span class="n">name</span>    <span class="n">bcc</span>
        <span class="n">model_file</span>  <span class="n">bcc</span><span class="o">/</span><span class="n">model</span>
    <span class="p">}</span>
    <span class="n">CompetingPhase</span><span class="p">{</span>
        <span class="n">name</span>    <span class="nb">hex</span>
        <span class="n">model_file</span>  <span class="nb">hex</span><span class="o">/</span><span class="n">model</span>
    <span class="p">}</span>
    <span class="n">CompetingPhase</span><span class="p">{</span>
        <span class="n">name</span>    <span class="n">gyr</span>
        <span class="n">model_file</span>  <span class="n">gyr</span><span class="o">/</span><span class="n">model</span>
    <span class="p">}</span>
    <span class="n">CompetingPhase</span><span class="p">{</span>
        <span class="n">name</span>    <span class="n">lam</span>
        <span class="n">model_file</span>  <span class="n">lam</span><span class="o">/</span><span class="n">model</span>
        <span class="n">range_check</span> <span class="n">rho_rgrid</span><span class="o">.</span><span class="n">out</span>   <span class="mf">0.001</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You may notice the absence of disorder among the competing morphologies
defined in the above example.
<strong>Disorder is considered to be a competing phase implicitly
and automatically accounted for by the program,
and does not need to be specified by the user as a competing phase.</strong>
To do this, the program makes use of the fact that PSCF automatically
includes the homogeneous disordered free energy in the output file from
a calculation. When reading results from PSCF, PscfInverse first
determines the energy of each user-specified phase relative to disorder.
With the energy of each phase stored using homogeneous disorder as the
reference state, the search for the energy of the most stable competitor
can be initialized to <span class="math notranslate nohighlight">\(0\)</span>, for the implicit disordered phase, and
proceed to check the user-specified competitors against that initial,
implicit disordered phase.</p>
<p>Within the <code class="docutils literal notranslate"><span class="pre">Phases{</span> <span class="pre">...</span> <span class="pre">}</span></code> block, the user first specifies the
scft solver to use for the calculation using the label <code class="docutils literal notranslate"><span class="pre">scft_solver</span></code>.
Following this label, a string key is entered to identify the
desired SCFT solver. Presently, the only available solver is the
Fortran version of PSCF (using key <em>pscf</em>). As additional solvers
are added to the program, a list of available solvers and keys will
be added here.</p>
<p>Next, the user may (optionally) specify a shared root for the
phase input files. This entry uses the label <code class="docutils literal notranslate"><span class="pre">input_root</span></code>
and is followed by a path to the phase input file root directory.
The path specified for this entry must be written relative to the
working directory of the program (i.e. the directory from which
the program was executed).
If this option is omitted, the input root is then taken to be
the program’s working directory.</p>
<p>Finally, the user will specify the list of target and competing
phases. Each target phase is declared within its own
<code class="docutils literal notranslate"><span class="pre">TargetPhase{</span> <span class="pre">...</span> <span class="pre">}</span></code> block, while each competitor is
defined in its own <code class="docutils literal notranslate"><span class="pre">CompetingPhase{</span> <span class="pre">...</span> <span class="pre">}</span></code> block.
These two declaration types differ only in the name given to
the block (<em>TargetPhase</em> or <em>CompetingPhase</em>), while their
internal syntax is identical. Each phase, whether a target
or competitor, must be given a unique name and a model file.
The name, speficied using the label <code class="docutils literal notranslate"><span class="pre">name</span></code>, must be unique
among all target and competing phases, and must also represent
a valid unix-style directory name. The name will be used
by PscfInverse to label the phase in output data as well as to
create working directories for each of that phase’s SCFT
calculations.
The model file, specified using the label <code class="docutils literal notranslate"><span class="pre">model_file</span></code>,
must provide the path to a valid PscfFieldGen model file.
If an <em>input_root</em> was specified, the path specified here
must be written relative to that directory; otherwise,
it must be written relative to the program’s working directory.
Although the model file specified here would contain its own
declaration of <em>scft_solver</em>, the declaration there should match
that given earlier in the <em>Phases</em> block (this is not checked by
the program, but a mismatch would likely cause the program to crash).
The model file identified here is used to set up the initial guess
field generator for the SCFT calculations, as well as to identify the
template parameter file being used for the calculations.
Specific requirements for the model file can be found in instructions
for PscfFieldGen.</p>
<p>Each phase block can also include the optional label <code class="docutils literal notranslate"><span class="pre">range_check</span></code>.
This optional input should be placed immediately following the model
file input.
If present, this label sets the phase to check the total variation
in the final real-space density field to screen for a collapse
to disorder. In order to use this check, the template PSCF parameter file
must include a directive to convert the final density field output
by the <code class="docutils literal notranslate"><span class="pre">ITERATE</span></code> command (the <em>rho</em> file) into an <em>rgrid</em> density
field. In PSCF, this would be the <code class="docutils literal notranslate"><span class="pre">FIELD_TO_RGRID</span></code> command.
The format for this entry would be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">range_check</span> <span class="p">[</span><span class="n">rgrid_field_file_name</span><span class="p">]</span> <span class="p">[</span><span class="n">field_tolerance</span><span class="p">]</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">[rgrid_field_file_name]</span></code> is the name of the final
rgrid density field file, relative to the SCFT working directory
(i.e. it should match the <em>output_filename</em> value from the
<em>FIELD_TO_RGRID</em> command), and where <code class="docutils literal notranslate"><span class="pre">[field_tolerance]</span></code>
is a floating point value identifying the minimum required
variation in the density field to be considered “not disordered”.</p>
<p>Finally, each phase block allows a set of core monomer options to be
to be specified (core monomer inputs in the model file are ignored).
These should be listed after the <code class="docutils literal notranslate"><span class="pre">range_check</span></code>
input (if present) and should be the last inputs included for the phase.
For each monomer that should be considered an option for selecting the
structure cores, include the entry <code class="docutils literal notranslate"><span class="pre">core_option</span>&#160;&#160;&#160; <span class="pre">[monomerID]</span></code>.
If no core options are specified, all monomers in the system are considered
potential core monomers. <strong>Note: If the phase being described is lamellar,
these core options are ignored during field generation.</strong></p>
<p>Thus, a hypothetical phase declaration block with all optional details could
look like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TargetPhase</span><span class="p">{</span>
    <span class="n">name</span>    <span class="n">bcc</span>
    <span class="n">model_file</span>  <span class="n">bcc</span><span class="o">/</span><span class="n">model</span>
    <span class="n">range_check</span> <span class="n">out</span><span class="o">.</span><span class="n">rho_rgrid</span>   <span class="mf">0.001</span>
    <span class="n">core_option</span> <span class="mi">0</span>
    <span class="n">core_option</span> <span class="mi">2</span>
    <span class="n">core_option</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example, a range check is used on the final rgrid field to
check for disorder. Additionally, monomer 1 is omitted from the core
selection process (as are monomers 4+, if they exist in the system.)</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pscfinverse</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="main.html"> Parameter File</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Logan Case.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/param/phases.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>